image: alpine/edge
packages:
  - nodejs
  - npm
  - pnpm
secrets:
  - 82c13a71-a682-4aaf-8488-77f040a75512 # CF pages token
tasks:
  - package: |
      cd jamesatjaminit.dev
      pnpm install
      pnpm run build

  - upload: |
      cd jamesatjaminit.dev
      set +x
      CF_TOKEN=$(cat ~/.cloudflarePagesSecret)
      set +x
      pnpm run deploy
